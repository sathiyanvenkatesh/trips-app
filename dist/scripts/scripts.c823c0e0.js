"use strict";angular.module("tripsBetaApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("tripsBetaApp").controller("MainCtrl",["$scope","$http","myJson",function(a,b,c){function d(){c.all().then(function(b){a.response=b,console.log("Full Response====="+JSON.stringify(a.response)),a.uniqueOrgNames=[];for(var c=0;c<a.response.deals.length;c++)-1===a.uniqueOrgNames.indexOf(a.response.deals[c].departure)&&a.uniqueOrgNames.push(a.response.deals[c].departure);console.log("departure======"+a.uniqueOrgNames),a.uniqueDestNames=[];for(var c=0;c<a.response.deals.length;c++)-1===a.uniqueDestNames.indexOf(a.response.deals[c].arrival)&&a.uniqueDestNames.push(a.response.deals[c].arrival);console.log("arrival======"+a.uniqueDestNames)})}function e(b,c){a.destresults=[];var d="arrival",e=c;a.orgresults=[];for(var d="departure",f=b,g=0;g<a.response.deals.length;g++)a.response.deals[g][d]==e?a.destresults.push(a.response.deals[g]):a.response.deals[g][d]==f&&a.orgresults.push(a.response.deals[g]);console.log("destresults results"+JSON.stringify(a.destresults)),console.log("destresults length:"+a.destresults.length),console.log("orgresults:"+JSON.stringify(a.orgresults)),console.log("orgresults length:"+a.orgresults.length),a.finalList=[];for(var g=0;g<a.response.deals.length;g++)if(a.response.deals[g].arrival===f)if(a.response.deals[g].departure===e){var h={};h.departure=a.response.deals[g].arrival,h.arrival=a.response.deals[g].departure,h.transport=a.response.deals[g].transport,h.duration=a.response.deals[g].duration,h.discount=a.response.deals[g].discount,h.cost1=a.response.deals[g].cost-a.response.deals[g].discount/100*a.response.deals[g].cost,a.finalList.push(h)}else for(var i=0;i<a.response.deals.length;i++)if(a.response.deals[g].departure===a.response.deals[i].arrival&&a.response.deals[i].departure===e){var h={};h.departure=a.response.deals[g].arrival+a.response.deals[g].departure,h.arrival=a.response.deals[i].arrival+a.response.deals[i].departure,h.transport=a.response.deals[g].transport+" - "+a.response.deals[i].transport,h.duration=a.response.deals[g].duration,h.discount=a.response.deals[g].discount,h.cost1=a.response.deals[g].cost-a.response.deals[g].discount/100*a.response.deals[g].cost,a.finalList.push(h)}console.log("finalList.."+JSON.stringify(a.finalList)),a.finalresp=a.finalList}d(),a.search=function(){a.Orgselected===a.DestSelected?(a.alerts=[{type:"danger",msg:"The Departure City  and  Destination City cannot be same. Please re-type."}],a.closeAlert=function(b){a.alerts.splice(b,1)}):e(a.Orgselected,a.DestSelected)},a.modelOptions={debounce:{"default":500,blur:250},getterSetter:!0}}]),function(){angular.module("tripsBetaApp").factory("myJson",["$http",function(a){var b={};return b.get=a.get("scripts/response.json").then(function(a){return a.data}),b.all=function(){return b.get},b}])}(),angular.module("tripsBetaApp").run(["$templateCache",function(a){a.put("views/main.html",'<script type="text/ng-template" id="alert.html"><div class="alert" style="background-color:#fa39c3;color:white" role="alert">\n      <div ng-transclude></div>\n    </div></script> <div class="container"> <div class="col-md-offset-1 col-md-10"> <div class="form-area"> <form role="form"> <br style="clear:both"> <h3 style="margin-bottom: 25px; text-align: center">Travel route</h3> <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</uib-alert> <div class="form-group"> <input type="text" ng-model="Orgselected" ng-model-options="modelOptions" uib-typeahead="orgin for orgin in uniqueOrgNames | filter:$viewValue | limitTo:8" class="form-control" placeholder="From"> </div> <div class="form-group"> <input type="text" ng-model="DestSelected" ng-model-options="modelOptions" uib-typeahead="destination for destination in uniqueDestNames | filter:$viewValue | limitTo:8" class="form-control" placeholder="To"> </div> <div class="form-group"> <div class="btn-group"> <label class="btn btn-info" ng-model="radioModel" uib-btn-radio="\'Left\'" style="margin-right:10px">Fastest</label> <label class="btn btn-info" ng-model="radioModel" uib-btn-radio="\'Middle\'">Cheapest</label> </div> </div> <button type="button" class="btn btn-primary btn-lg btn-block" ng-click="search()">Search</button> <br style="clear:both"> </form> </div> <br><br><br><br> <div class="list-group"> <a class="list-group-item" ng-repeat="journey in finalList" style="&quot;padding:" 18px 20px> <h4 class="list-group-item-heading"> {{journey.departure}} <i class="glyphicon glyphicon-chevron-right" style="font-size: 12px;\n  position: relative;\n  top: 0px;\n  opacity: 0.6"></i> {{journey.arrival}} <span style="float:right"> {{journey.cost1}} <i class="glyphicon glyphicon-euro" style="font-size: 14px;\n  position: relative;\n  top: 0px;\n  opacity: 0.6"></i></span> </h4> <p class="list-group-item-text">{{journey.transport}} {{journey.reference}} for {{journey.duration.h}}H:{{journey.duration.m}}M </p> </a> </div> <div class="list-group"> <a class="list-group-item"> <h4 class="list-group-item-heading"> <div class="row"> <span class="col-sm-4 text-center">Total</span> <span class="col-sm-4 text-center">08h 30m</span> <span class="col-sm-4 text-center">480 <i class="glyphicon glyphicon-euro" style="font-size: 14px;\n  position: relative;\n  top: 0px;\n  opacity: 0.6"></i></span> </div> </h4> </a> </div> </div> </div> ')}]);